# 照片管理应用

这是一个使用 Flutter 开发的照片管理应用，集成了人脸识别功能。

## 项目需求

1. 照片管理和浏览功能
   - 支持从设备选择多张照片
   - 支持拖放添加照片
   - 网格视图展示照片

2. 人脸识别功能
   - 使用 ArcFace 模型进行人脸识别
   - 支持识别从婴儿到老年人的不同年龄段人脸
   - 能够处理侧脸和不同表情的人脸

3. 用户界面
   - 左侧栏显示检测到的唯一人脸
   - 点击左侧栏的人脸可以过滤显示包含该人脸的照片
   - 主视图显示照片网格，支持缩放和拖动

4. 性能和隐私
   - 所有处理在本地进行，保护用户隐私
   - 优化大量照片的处理性能

## 技术栈

- Flutter：用于开发跨平台应用
- C++：用于实现人脸识别算法
- OpenCV：用于图像处理和人脸检测
- ONNX：用于部署深度学习模型
- CMake：用于构建 C++ 项目

## 当前进展

1. 基本的 Flutter 应用结构已完成
2. 实现了照片选择和显示功能
3. 集成了 C++ 代码进行人脸识别
4. 使用 ArcFace 模型进行人脸特征提取
5. 实现了人脸比较和过滤功能
6. 优化了项目结构，处理了依赖冲突
7. 改进了人脸比较算法，使用余弦相似度
8. 实现了人脸聚类功能，可以识别唯一人脸

## 待办事项

1. 进一步优化人脸识别的准确性，特别是对于不同年龄段的人脸
2. 改进人脸聚类算法，考虑使用更复杂的聚类方法（如 DBSCAN）
3. 优化大规模照片处理的性能
4. 改进用户界面，提升用户体验
5. 实现增量学习，提高识别准确率
6. 添加更多的照片管理功能（如标签、分类等）

## 已知问题

1. 人脸识别在某些情况下可能不够准确，特别是对于年龄差异大的同一个人的照片
2. 需要进一步调整人脸比较的阈值，以平衡准确性和灵敏度

## 安装和运行

1. 确保已安装 Flutter、Dart 和 C++ 开发环境
2. 克隆此仓库
3. 运行 `flutter pub get` 安装依赖
4. 编译 C++ 代码（详见 `face_recognition/CMakeLists.txt`）
5. 运行 `flutter run` 启动应用

## 注意事项

- 确保 `assets` 目录中包含所有必要的模型文件
- 首次运行时，人脸识别可能需要一些时间来处理照片
- 项目仍在开发中，部分功能可能不完整或存在 bug

## 贡献

欢迎提交 Issue 或 Pull Request 来改进这个项目。

## 许可

[MIT License](LICENSE)